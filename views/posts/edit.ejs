<%- layout('layout/boilerPlate') %>

  <div class="form-container">
    <div class="form-card">
      <h1 class="form-title">âœï¸ Edit Moment</h1>
      <p class="form-subtitle">Update your moment's details</p>

      <form method="POST" action="/moments/v1/post/<%= post._id %>?_method=PATCH" enctype="multipart/form-data">
        <!-- Current Image Preview -->
        <div class="form-group">
          <label class="form-label">Current Image</label>
          <div style="border-radius: 12px; overflow: hidden; margin-bottom: 1rem;">
            <img src="<%= post.imageUrl %>" alt="<%= post.title %>" style="width: 100%; height: auto; display: block;">
          </div>
        </div>

        <!-- New Image Upload (Optional) -->
        <div class="form-group">
          <label for="imageUrl" class="form-label">Change Image (Optional)</label>
          <input type="file" name="imageUrl" id="imageUrl" class="form-control" accept="image/*">
          <small style="color: var(--text-secondary); font-size: 0.85rem; display: block; margin-top: 0.5rem;">
            Leave empty to keep the current image
          </small>
        </div>

        <!-- Title -->
        <div class="form-group">
          <label for="title" class="form-label">Title</label>
          <input type="text" name="title" id="title" class="form-control" value="<%= post.title %>">
        </div>

        <!-- Description -->
        <div class="form-group">
          <label for="description" class="form-label">Description</label>
          <textarea class="form-control" name="description" id="description" rows="4"><%= post.description %></textarea>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="form-submit-btn">
          ğŸ’¾ Save Changes
        </button>
      </form>

      <!-- Back Link -->
      <div style="text-align: center; margin-top: 1.5rem;">
        <a href="/moments/v1/show/<%= post._id %>" style="color: var(--text-secondary); font-size: 0.9rem;">
          â† Cancel and go back
        </a>
      </div>
    </div>
  </div>